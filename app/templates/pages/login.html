{% extends "base.html" %}

{% block title %}Login â€“ Tennis Court Finder{% endblock %}

{% block content %}
<article style="max-width: 420px; margin: 2rem auto;">
  <h2>Login</h2>
  <p>Enter your email to receive a one-time login code.</p>

  {% if flash %}
  <div class="flash {{ flash.type }}">{{ flash.message }}</div>
  {% endif %}

  {% if step == 'email' %}
  <form method="post" action="/login">
    <label>
      Email
      <input type="email" name="email" placeholder="player@example.com" required autofocus>
    </label>
    <button type="submit">Send Login Code</button>
  </form>

  {% elif step == 'otp' %}
  <form method="post" action="/login/verify">
    <input type="hidden" name="email" value="{{ email }}">
    <p>Code sent to <strong>{{ email }}</strong></p>
    <label>
      One-time code
      <input type="text" name="otp_code" maxlength="6" minlength="6"
             placeholder="123456" required autofocus autocomplete="one-time-code"
             pattern="\d{6}" inputmode="numeric">
    </label>
    <button type="submit">Verify</button>
    <p><small><a href="/login">Use a different email</a></small></p>
  </form>
  {% endif %}
</article>
{% endblock %}
